{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Update Employee</title>

  <!-- reuse same styles as add_employee -->
  <link rel="stylesheet" href="{% static 'css/add_employee.css' %}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>

  <!-- Background Canvas -->
  <canvas id="backgroundCanvas"></canvas>

  <div class="back-btn-container">
    <a href="{% url 'admin_page' %}" class="back-btn">
      <i class="bi bi-arrow-left-circle"></i> Back to User Management
    </a>
  </div>

  <div class="container">
    <h1>Update Employee</h1>
    <p class="subtitle">Edit the fields and save changes</p>

    <!-- Error / Success messages -->
    {% if messages %}
      {% for message in messages %}
        <div id="errorAlert" class="error-alert {% if message.tags %}{{ message.tags }}{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <!-- Form posts to update route -->
    <form method="POST" action="{% url 'update_user' user.id %}">
      {% csrf_token %}

      <div class="form-row">
        <div class="form-group">
          <label for="first_name">First Name</label>
          <input
            type="text"
            id="first_name"
            name="first_name"
            required
            value="{{ user.first_name|default_if_none:'' }}">
        </div>

        <div class="form-group">
          <label for="middle_initial">Middle Initial</label>
          <input
            type="text"
            id="middle_initial"
            name="middle_initial"
            maxlength="1"
            value="{{ user.middle_initial|default_if_none:'' }}">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="last_name">Last Name</label>
          <input
            type="text"
            id="last_name"
            name="last_name"
            required
            value="{{ user.last_name|default_if_none:'' }}">
        </div>

        <div class="form-group">
          <label for="position">Position</label>
          <input
            type="text"
            id="position"
            name="position"
            value="{{ user.position|default_if_none:'' }}">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            value="{{ user.email|default_if_none:'' }}">
        </div>

        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            name="username"
            required
            value="{{ user.username|default_if_none:'' }}">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="contact_no">Contact No.</label>
          <input
            type="text"
            id="contact_no"
            name="contact_no"
            value="{{ user.contact_no|default_if_none:'' }}">
        </div>

        <div class="form-group">
          <label for="role">Role</label>
          <select id="role" name="role" required>
            <option value="" disabled {% if not user.role %}selected{% endif %}>Select a role</option>
            <option value="superadmin" {% if user.role == 'superadmin' %}selected{% endif %}>Superadmin</option>
            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
            <option value="procurement" {% if user.role == 'procurement' %}selected{% endif %}>Procurement</option>
            <option value="inventory" {% if user.role == 'inventory' %}selected{% endif %}>Inventory</option>
            <option value="accounting" {% if user.role == 'accounting' %}selected{% endif %}>Accounting</option>
            <option value="viewer" {% if user.role == 'viewer' %}selected{% endif %}>Viewer</option>
          </select>
        </div>
      </div>

      <div style="display:flex; gap:12px; align-items:center;">
        <button type="submit" class="sign-in-btn">Save Changes</button>
        <a href="{% url 'admin_page' %}" class="back-link" style="margin-left:8px; color:#6b46ff; text-decoration:underline;"></a>
      </div>
    </form>
  </div>

  <!-- reuse the same JS for consistency -->
  <script src="{% static 'js/add_employee.js' %}"></script>
</body>
</html>
