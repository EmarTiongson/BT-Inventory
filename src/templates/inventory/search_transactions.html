{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/search_transactions.css' %}">
{% endblock %}

{% block content %}
<div class="transaction-search-container">
  <h1 class="page-title">Search Transactions by P.O. / D.R. No.</h1>

  <form method="GET" action="{% url 'search_transactions' %}" class="search-form">
    <input type="text" name="query" placeholder="Enter P.O. or D.R. Number" value="{{ request.GET.query }}">
    <button type="submit" class="search-btn">Search</button>
  </form>

  {% if transactions %}
    <div class="transaction-table-container">
      <table class="transaction-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Item Name</th>
            <th>Description</th>
            <th>Quantity</th>
            <th>Type</th> <!-- IN / OUT -->
            <th>P.O. / D.R. No.</th>
            <th>Reference</th>
          </tr>
        </thead>
        <tbody>
          {% for t in transactions %}
          <tr>
            <td>{{ t.date|date:"Y-m-d H:i" }}</td>
            <td>{{ t.item.item }}</td>
            <td>{{ t.item.description }}</td>
            <td>{{ t.quantity }}</td>
            <td>{{ t.transaction_type }}</td>
            <td>{{ t.po_or_dr }}</td>
            <td>{{ t.reference }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% elif request.GET.query %}
    <p class="no-results">No transactions found for "{{ request.GET.query }}"</p>
  {% endif %}
</div>
{% endblock %}
