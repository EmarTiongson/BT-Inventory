{% extends 'base.html' %}
{% load static %}
{% block title %} Add Item {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/add_item.css' %}">
<link rel="stylesheet" href="{% static 'css/buttons.css' %}">
{% endblock %}

{% block content %}
<div class="add-item-container">
    <h1 class="page-title">Add New Item</h1>

    {% if error_message %}
    <div class="error-message">
        <i class="bi bi-exclamation-triangle-fill"></i>
        <span>{{ error_message }}</span>
    </div>
    {% endif %}

    <div class="inventory-card">
        <form method="POST" enctype="multipart/form-data" action="{% url 'add_item' %}">
            {% csrf_token %}

            <!-- Image Upload -->
            <div class="upload-box">
                <label for="image" class="upload-label" id="uploadLabel">
                    <i class="bi bi-upload"></i> Upload Image
                    <input type="file" id="image" name="image" accept="image/*" style="display:none;" required>
                </label>
                <img id="imagePreview" src="#" alt="Selected Image" style="display:none; max-width:150px; margin-top:10px; border-radius:8px;">
            </div>

            <!-- Form Fields -->
            <div class="form-grid">
                <input type="date" name="date_added" required value="{% if form_data.date_added %}{{ form_data.date_added }}{% else %}{{ today|date:'Y-m-d' }}{% endif %}">
                <input type="text" name="item" placeholder="Item Name" value="{{ form_data.item|default:'' }}" required>
                <input type="text" name="description" placeholder="Description" value="{{ form_data.description|default:'' }}" required>
                <select name="unit_of_quantity" required>
                    <option value="" disabled {% if not form_data.unit_of_quantity %}selected{% endif %}>Unit of Quantity</option>
                    <option value="pieces" {% if form_data.unit_of_quantity == 'pieces' %}selected{% endif %}>Pieces</option>
                    <option value="rolls" {% if form_data.unit_of_quantity == 'rolls' %}selected{% endif %}>Rolls</option>
                    <option value="meters" {% if form_data.unit_of_quantity == 'meters' %}selected{% endif %}>Meters</option>
                    <option value="gallons" {% if form_data.unit_of_quantity == 'gallons' %}selected{% endif %}>Gallons</option>
                    <option value="liters" {% if form_data.unit_of_quantity == 'liters' %}selected{% endif %}>Liters</option>
                    <option value="bottles" {% if form_data.unit_of_quantity == 'bottles' %}selected{% endif %}>Bottles</option>
                    <option value="cans" {% if form_data.unit_of_quantity == 'cans' %}selected{% endif %}>Cans</option>
                </select>
            </div>

            <!-- Submit -->
            <div class="submit-section">
                <button type="submit" class="add-btn">
                    <i class="bi bi-plus-square"></i> Add to Inventory
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Desktop Back Button (text + icon) -->
<a href="{% url 'inventory' %}" class="return-btn-fixed desktop-back-btn">
    <i class="bi bi-arrow-left-circle"></i> Back to Overview
</a>

<!-- Mobile Back Button (icon only, circular) -->
<a href="{% url 'inventory' %}" id="mobileBackBtn" class="return-btn-fixed mobile-back-btn">
    <i class="bi bi-arrow-left-circle"></i>
</a>

<script src="{% static 'js/add_item.js' %}"></script>
{% endblock %}
