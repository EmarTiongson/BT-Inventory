{% extends 'base.html' %}
{% load static %}
{% load tz %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/asset_history.css' %}">
{% endblock %}

{% block content %}
<div class="history-container">
  <h1 class="page-title">Asset / Tool History</h1>

  <h2 style="margin-bottom: 20px; font-size: 1.5rem;">{{ asset.tool_name }}</h2>

  {% if updates %}
    <table class="history-table">
      <thead>
        <tr>
          <th>Date & Time</th>
          <th>Previous User</th>
          <th>Assigned To</th>
          <th>Remarks</th>
          <th>Updated By</th>
        </tr>
      </thead>
      <tbody>
        {% for update in updates %}
          <tr>
            <td>{{ update.transaction_date|timezone:"Asia/Manila"|date:"F d, Y - h:i A" }}</td>
            <td>{{ update.previous_user|default:"—" }}</td>
            <td>{{ update.assigned_to|default:"—" }}</td>
            <td>{{ update.remarks|default:"No remarks" }}</td>
            <td>{{ update.updated_by.username|default:"System" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="text-align: center; color: #64748b; padding: 40px;">
      No history available for this asset/tool yet.
    </p>
  {% endif %}
</div>

<a href="{% url 'assets_tools' %}" class="return-btn-fixed">
  <i class="bi bi-arrow-left-circle"></i> Back to Assets & Tools
</a>
{% endblock %}
