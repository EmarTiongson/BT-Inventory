{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/add_asset_tool.css' %}">
{% endblock %}

{% block content %}
<div class="add-item-container">
  <h1 class="page-title">Add New Asset / Tool</h1>
  
  <!-- ✅ Error Message Display -->
  {% if error_message %}
  <div class="error-message">
    <i class="bi bi-exclamation-triangle-fill"></i>
    <span>{{ error_message }}</span>
  </div>
  {% endif %}

  <div class="inventory-card">
    <form method="POST" enctype="multipart/form-data" action="{% url 'add_asset_tool' %}">
      {% csrf_token %}
      
      <!-- Image Upload Section -->
      <div class="upload-box">
        <label for="image" class="upload-label" id="uploadLabel">
          <i class="bi bi-upload"></i> Upload Image
          <input type="file" id="image" name="image" accept="image/*" style="display: none;" required>
        </label>
        <img id="imagePreview" src="#" alt="Selected Image" style="display:none; max-width:150px; margin-top:10px; border-radius:8px;" />
      </div>

      <!-- Form Fields -->
      <div class="form-grid">
        <!-- Date Added with Label -->
        <div class="form-field">
          <label for="date_added" class="field-label">Date Added</label>
          <input type="date" id="date_added" name="date_added" required value="{% if form_data.date_added %}{{ form_data.date_added }}{% else %}{{ today|date:'Y-m-d' }}{% endif %}">
        </div>
        
        <!-- Tool/Asset Name with Label -->
        <div class="form-field">
          <label for="tool_name" class="field-label">Tool / Asset Name</label>
          <input type="text" id="tool_name" name="tool_name" placeholder="Enter tool or asset name" value="{{ form_data.tool_name|default:'' }}" required>
        </div>
        
        <!-- Description with Label -->
        <div class="form-field">
          <label for="description" class="field-label">Description</label>
          <input type="text" id="description" name="description" placeholder="Enter description" value="{{ form_data.description|default:'' }}" required>
        </div>
        
        <!-- Warranty Date with Label -->
        <div class="form-field">
          <label for="warranty_date" class="field-label">Warranty Expiration Date</label>
          <input type="date" id="warranty_date" name="warranty_date" value="{{ form_data.warranty_date|default:'' }}">
        </div>
      </div>

      <!-- Submit Section -->
      <div class="submit-section">
        <button type="submit" class="add-btn">
          <i class="bi bi-plus-square"></i> Add Asset / Tool
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ✅ Fixed Return Button -->
<a href="{% url 'assets_tools' %}" class="return-btn-fixed">
  <i class="bi bi-arrow-left-circle"></i> Back to Assets & Tools
</a>

<script src="{% static 'js/add_asset_tool.js' %}"></script>
{% endblock %}